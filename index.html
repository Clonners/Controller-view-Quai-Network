<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Controller Explanation</title>
  <link rel="icon" href="quai-logo.ico" type="image/x-icon">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#2b0211">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180.png">
  <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-167.png">
  <link rel="apple-touch-icon" sizes="120x120" href="icons/icon-120.png">
  <style>
    :root{--bg1:#120308;--bg2:#1c0608;--accent:#ff4250}
    html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:radial-gradient(circle at 20% 10%, rgba(255,66,80,0.03), transparent 10%), linear-gradient(180deg, var(--bg2), var(--bg1));color:#fff}
    .landing{height:100%;display:flex;align-items:center;justify-content:center;position:relative}
    .brand{position:absolute;top:20px;left:50%;transform:translateX(-50%);display:flex;gap:12px;align-items:center;justify-content:center}
    .brand img{width:36px;height:36px}
    .brand strong{font-size:0.95rem;white-space:nowrap;font-weight:600;display:inline-block}
    .panel{width:340px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);border-radius:12px;padding:18px;box-shadow:0 10px 40px rgba(0,0,0,0.6)}
    .panel h2{margin:0 0 10px 0;font-size:1.05rem}
    .slide-btn{display:block;width:100%;padding:12px 14px;margin:8px 0;border-radius:10px;border:none;background:rgba(0,0,0,0.25);color:#fff;font-weight:600;cursor:pointer;text-decoration:none}
    .slide-btn.primary{background:linear-gradient(90deg,var(--accent),#ff7a6f);box-shadow:0 8px 24px rgba(255,66,80,0.12)}
    .drawer{
      position:fixed;left:-360px;top:0;width:360px;height:100%;
      background:
        radial-gradient(circle at 40% 0%, rgba(255,66,80,0.22) 0%, rgba(44,8,18,0.13) 60%, transparent 100%),
        linear-gradient(180deg, rgba(44,8,18,0.92) 0%, #1c0608 60%, #120308 100%);
      box-shadow:12px 0 48px 0 rgba(0,0,0,0.38);
      border-right:1.5px solid rgba(255,255,255,0.04);
      border-radius:0 18px 18px 0;
      padding:28px 22px 28px 28px;                    
      transition:left .33s cubic-bezier(.2,.9,.3,1),background 0.3s;
      z-index:40;
      backdrop-filter: blur(8px) saturate(1.2);
      -webkit-backdrop-filter: blur(8px) saturate(1.2);
    }
    .drawer.open{left:0}
    .drawer h3{margin-top:0}
    /* Chevron centrado vertical igual que mining */
    .chevron-btn {
      position: fixed;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      z-index: 1100;
      background: none;
      border: none;
      padding: 0;
      cursor: pointer;
      outline: none;
      transition: opacity 0.18s;
      opacity: 0.85;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .chevron-btn:hover, .chevron-btn:focus { opacity: 1; }
    .chevron-icon {
      transition: transform 0.33s cubic-bezier(.2,.9,.3,1);
      box-shadow: 0 4px 18px rgba(0,0,0,0.18);
    }
    .drawer.open ~ .chevron-btn .chevron-icon {
      transform: rotate(180deg);
    }
    @media (max-width: 600px) {
      .chevron-btn { left: 6px; top: 50%; transform: translateY(-50%); }
      .chevron-icon { width: 28px; height: 28px; }
      .brand{left:50%;transform:translateX(-50%);top:14px}
    }
    .open-btn, .barra-gris, .dashboard-btn { display: none !important; }
  </style>
</head>
<body>
  <div class="landing">
    <div class="brand">
      <img src="quai-logo.png" alt="Controller">
      <strong>Controller Explanation</strong>
    </div>
    <button class="chevron-tab" id="openDrawer" aria-label="Open menu">
      <svg class="chevron-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path class="chevron-arrow" d="M8 6l6 6-6 6" />
      </svg>
    </button>
    <div class="drawer" id="drawer">
      <h3>Choose a dashboard</h3>
      <p style="opacity:.8;margin:8px 0 16px 0">Quick links to the available dashboards.</p>
      <a href="index.html" class="slide-btn">Home</a>
      <a href="mining/" class="slide-btn primary">Mining Dashboard</a>
      <a href="controller/" class="slide-btn primary">Controller Dashboard</a>
    </div>
    <!-- controller panel removed; use left chevron for navigation and page content -->
    <div class="panel" role="main" aria-labelledby="poem-heading" style="margin-top:8px;">
      <h2 id="poem-heading">PoEM</h2>
      <p style="opacity:.9;margin:8px 0 6px 0">PoEM transforms Nakamoto Consensus from asking:</p>
      <blockquote style="margin:6px 0 10px 0;padding:12px;border-left:3px solid rgba(255,66,80,0.18);background:rgba(255,255,255,0.01);color:#ffdede;">“Did this block meet the minimum requirement?”</blockquote>
      <p style="opacity:.9;margin:6px 0 6px 0">to asking:</p>
      <blockquote style="margin:6px 0 0 0;padding:12px;border-left:3px solid rgba(255,66,80,0.18);background:rgba(255,255,255,0.01);color:#ffdede;">“Exactly how much work went into this block?”</blockquote>
    </div>
  </div>
  <script>
    (function(){
      const drawer = document.getElementById('drawer');
      const btn = document.getElementById('openDrawer');
      function setDrawerOpen(open) {
        if (!drawer) return;
        if (open) {
          drawer.classList.add('open');
          btn.style.display = 'none';
        } else {
          drawer.classList.remove('open');
          btn.style.display = '';
        }
      }
      if (btn) btn.addEventListener('click', function(e){
        e.stopPropagation();
        setDrawerOpen(!drawer.classList.contains('open'));
      });
      // close on outside click
      document.addEventListener('click', function(e){
        if(!drawer.contains(e.target) && !btn.contains(e.target)) setDrawerOpen(false);
      });
      // Touch swipe to open/close (mobile)
      let touchStartX = 0, touchStartY = 0;
      const EDGE_START_THRESHOLD = 40; // px from left edge to allow open gesture
      const SWIPE_OPEN_THRESHOLD = 60; // px horizontal movement required to open
      const SWIPE_CLOSE_THRESHOLD = -60; // px horizontal movement required to close
      document.addEventListener('touchstart', function(e){
        if (!e.touches || e.touches.length !== 1) return;
        const t = e.touches[0];
        touchStartX = t.clientX;
        touchStartY = t.clientY;
      }, { passive: true });
      document.addEventListener('touchmove', function(e){
        if (!e.touches || e.touches.length !== 1) return;
        const t = e.touches[0];
        const dx = t.clientX - touchStartX;
        const dy = t.clientY - touchStartY;
        if (Math.abs(dy) > 50) return;
        if (!drawer.classList.contains('open') && touchStartX <= EDGE_START_THRESHOLD && dx > SWIPE_OPEN_THRESHOLD) {
          setDrawerOpen(true);
        }
        if (drawer.classList.contains('open') && dx < SWIPE_CLOSE_THRESHOLD) {
          setDrawerOpen(false);
        }
      }, { passive: true });
      // defensive: ensure closed on load
      setDrawerOpen(false);
    })();
  </script>
</body>
</html>
